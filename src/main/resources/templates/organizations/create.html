<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!--<head th:replace="partials/head :: head"></head>-->
<head>
<!--    !&#45;&#45;    FILESTACK API&ndash;&gt;-->
    <!-- This script tag includes the Filestack API into your HTML file -->
    <script type="text/javascript" src="https://static.filestackapi.com/v3/filestack.js"></script>
</head>
<body>
<nav th:replace="partials/topnav :: navbar">
</nav>
<h1>Create Organization</h1>
<form th:action="@{/organizations/create}" method="POST" th:object="${organization}" class="second-tier-container form">
    <div class="organizationName col-md-6">
        <label for="name" class="form-label h4">Organization Name</label>
        <input id="name" type="text" class="form-control" th:field="*{orgName}">
    </div>

    <div class="organizationName col-md-6">
        <label for="description" class="form-label h4">Organization Description</label>
        <input id="description" type="text" class="form-control" th:field="*{orgDescription}">
    </div>

    <div class="col-md-6 form-group">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" th:field="*{donor}" id="isDonor">
            <label class="form-check-label" for="isDonor">
                Check if you are a donor
            </label>
        </div>
    </div>




<!--    <div class="organizationName col-md-6">-->
<!--        <label for="orgtype" class="form-label h4">Donor?</label>-->
<!--        <select id="orgtype" type="checkbox" class="form-control" th:field="*{isDonor}">-->
<!--            <option th:field="*{isDonor}" th:value="donor">Restaurant</option>-->
<!--            <option th:field="*{isDonor}" th:value="!donor">Charity</option>-->
<!--        </select>-->
<!--    </div>-->



    <div class="row text-white ">

    <div class="row">

        <div class="address col-md-6 m-0">
            <label for="address" class="form-label h4">Address</label>
            <input id="address" type="text" class="form-control" th:field="*{orgStAddress}">
        </div>

        <div class="col-md-6">
            <label for="city" class="form-label h4">City</label>
            <input id="city" type="text" class="form-control" th:field="*{orgCity}">
        </div>
        <div class="col-md-3">
            <label for="state" class="form-label h4">State</label>
            <select id="state" class="form-select h4" th:field="*{orgState}">
                <option selected disabled value="">Choose...</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="DC">District Of Columbia</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
            </select>
        </div>
        <div class="col-md-3">
            <label for="zip" class="form-label h4 ">Zip Code</label>
            <input id="zip" type="text" class="form-control mb-3"
                   th:field="*{orgZip}">
        </div>
        <div class="col-md-3">
            <label for="images" class="form-label h4 ">Images</label>
            <input id="images" type="text" class="form-control mb-3"
                   th:field="*{images}">
        </div>

        <div class="row">-->
            <div class="px-2.5">
              <button class="upload btn btn-outline-light hide p-0 mx-0 me-2 mt-4"
                      name="Pick photo"
                      id="photoPicker" onclick="openPhotoPicker()" style="color: black">Upload
                Photo
              </button>
              <button type="submit" class="btn btn-outline-light mt-4"
                      value="Sign me up!" id="sub-btn" style="color: black">Submit
              </button>
            </div>
          </div>

        <div class="col-md-3">
            <label for="user_info" class="form-label h4 ">User Id</label>
            <input id="user_info" type="text" class="form-control mb-3"
                   th:field="*{user}">
        </div>

    <button type="submit" class="btn btn-primary">
        Create
    </button>

    </div>



</form>


<footer th:replace="partials/footer :: footer">
</footer>
<script th:replace="partials/script :: script">
</script>
<script>




    //Instantiating dialog with Filestack
    var client = filestack.init("AzWevRAKVQki1Rm9iW9CRz");
    //Filestack API method 'pick()' that opens the file picker
    // client.pick({});

    // JS CODE FROM filestack.js

    // const client = filestack.init(FSapiKey);
    const options = {
        fromSources: ['local_file_system'],
        transformations: {
            crop: true,
            circle: true,
            rotate: true
        }
    }
    const picker = client.picker({
        exposeOriginalFile: true,
        onFileSelected: checkImgSize,
    });
    function openPhotoPicker() {
        console.log("open Photo Picker");
        client.pick({
            accept: 'image/*',
            maxFiles: 1,
        }).then(function (result) {
            console.log(JSON.stringify(result));
            imageHandle = result.filesUploaded[0].url;
            console.log(imageHandle);
        }).then(function () {
            $(".organizationImages").append("<input type='hidden' name='imageUrl' value='" + imageHandle + "'>");
        })
        json_data = {imageHandle}
        var organizationImages = document.createElement("img");
        organizationImages.onload = function () {
            document.getElementById("organizationImages").appendChild(organizationImages);
        }

        organizationImages.src = imageHandle;
        function checkImgSize (file) {
            return new Promise(function (resolve, reject) {
                const maxWidth = 300;
                const maxHeight = 300;
                const blob = file.originalFile;

                // Get an object URL for the local file
                const url = URL.createObjectURL(blob);

                // Create an image and load the object URL
                const img = new Image();
                img.src = url;

                img.onload = function () {
                    URL.revokeObjectURL(url);

                    if (this.naturalWidth > maxWidth) {
                        reject('File is too wide');
                    }

                    if (this.naturalHeight > maxHeight) {
                        reject('File is too tall');
                    }

                    // If we made it here then the file was approved
                    resolve();
                }
            });
        }


    }

</script>
<script src="keys.js"></script>

<!--<script>-->
<!--  let organizationForm = '';-->

<!--  let organization = $("#organization");-->
<!--  let actType = $("#accountType");-->
<!--  let isOwner = $("#isOwner");-->
<!--  let upload = $("#photoPicker");-->

<!--  $(actType).change(function () {-->
<!--    if (actType.val() === "organization") {-->
<!--      organization.removeClass("hide");-->
<!--      isOwner.val("true");-->
<!--      upload.removeClass("hide");-->
<!--    } else if (actType.val() === "consumer") {-->
<!--      organization.addClass("hide");-->
<!--      upload.addClass("hide");-->
<!--      isOwner.val("false");-->
<!--    }-->
<!--  })-->


<!--</script>-->



</body>
</html>












